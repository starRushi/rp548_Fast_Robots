<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lab 1: Artemis Board and Bluetooth</title>
  <style>
    :root{
      --text:#111;
      --muted:#555;
      --rule:#d8d8d8;
      --bg:#ffffff;
      --codebg:#f6f6f6;
      --link:#0b3d91;
      --maxw: 860px;
    }
    html,body{ background:var(--bg); color:var(--text); }
    body{
      margin:0;
      font-family: "Times New Roman", Times, serif;
      line-height: 2.0;
      font-size: 18px;
    }
    .wrap{ max-width: var(--maxw); margin: 0 auto; padding: 48px 28px 72px; }
    header{ border-bottom:1px solid var(--rule); padding-bottom: 18px; margin-bottom: 26px; }
    .crumbs{ font-size: 16px; color: var(--muted); }
    .crumbs a{ color: var(--link); text-decoration: none; }
    .crumbs a:hover{ text-decoration: underline; }
    h1{ font-size: 28px; margin: 6px 0 0; line-height: 1.4; }
    .meta{ color: var(--muted); font-size: 16px; margin-top: 6px; }
    h2{ font-size: 22px; margin: 34px 0 8px; }
    h3{ font-size: 19px; margin: 26px 0 6px; }
    p{ margin: 10px 0; }
    ul{ margin: 10px 0 10px 26px; }
    li{ margin: 6px 0; }
    hr{ border:0; border-top:1px solid var(--rule); margin: 26px 0; }
    .callout{
      border:1px solid var(--rule);
      padding: 14px 16px;
      background: #fcfcfc;
      margin: 16px 0;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px 18px;
    }
    .kv{
      border:1px solid var(--rule);
      padding: 12px 14px;
      background:#fff;
    }
    .kv b{ display:block; font-weight:700; margin-bottom: 4px; }
    code, pre{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 14px;
      line-height: 1.6;
    }
    pre{
      background: var(--codebg);
      border:1px solid var(--rule);
      padding: 12px 14px;
      overflow:auto;
      margin: 12px 0;
    }
    .figure{
      border:1px solid var(--rule);
      padding: 10px;
      background:#fff;
      margin: 12px 0;
    }
    .figure img, .figure video{
      max-width:100%;
      display:block;
      margin: 0 auto;
    }
    .caption{
      color: var(--muted);
      font-size: 15px;
      margin-top: 8px;
      line-height: 1.6;
    }
    .task{
      border-top:1px solid var(--rule);
      padding-top: 18px;
      margin-top: 18px;
    }
    .tight{ margin-top: 0; }
    .small{ font-size:16px; color:var(--muted); }
    @media (max-width: 760px){
      .grid{ grid-template-columns: 1fr; }
      body{ font-size: 17px; }
      .wrap{ padding: 36px 18px 60px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <div class="crumbs">
        <a href="/">Fast Robots @ Cornell</a> &nbsp;›&nbsp; <span>Lab 1</span>
      </div>
      <h1>Lab 1: The Artemis Board and Bluetooth</h1>
      <div class="meta">
        <span>Board: SparkFun RedBoard Artemis Nano</span> ·
        <span>Interface: USB Serial + BLE</span> ·
      </div>
    </header>

    <section>
      <h2>Overview</h2>
      <p>
        <span class="small">Over the course of two weeks, we performed labs 1a and 1b, to familiarize ourselves with the Arduino IDE, programming the Artemis board, and bluetooth connection. </span>
      </p>
    </section>

    <section>
      <h2>Prelab</h2>

      <h3>Setup</h3>
      <div class="grid">
        <div class="kv">
          <b>Arduino IDE and Board Support</b>
          <div class="small">
            IDE version: 2.3.7 · Apollo boards manager: SparkFun Apollo3 Boards · Port/Board selection verified.
          </div>
        </div>
        <div class="kv">
          <b>Artemis MAC Address</b>
          <div class="small">
            MAC printed in Serial Monitor: <code>[fill: c0:81:a4:24:29:64]</code>
          </div>
        </div>
        <div class="kv">
          <b>BLE Service UUID</b>
          <div class="small">
            Generated UUID used to avoid cross-connecting: <code>84b22398-9ffc-4b89-aa8f-b9d6956d5dd9</code>
          </div>
        </div>
      </div>

      <div class="figure">
        <!-- Replace src with your path, e.g. /assets/lab1/mac_serial.png -->
        <img src="[put-image-path-here]" alt="Serial monitor showing MAC address" />
        <div class="caption">Figure 1. Artemis prints its MAC address after flashing the BLE sketch (115200 baud).</div>
      </div>

      <h3>Codebase understanding</h3>
      <p class="small">
        Replace this with a short explanation of the BLE architecture in your own words. Include: service UUID, RX command characteristic (write), TX data characteristics (notify), and how the command string is parsed on the Artemis.
      </p>

      <pre><code>// Optional: include a short pseudocode snippet (not full code).
// Central (Python): connect → start_notify(TX) → write command to RX.
// Peripheral (Artemis): if RX written → parse cmd → execute → notify TX.</code></pre>
    </section>

    <section>
      <h2>Lab Tasks</h2>

      <h3>Configurations</h3>
      <p class="small">
        Document the exact configuration changes you made (connections.yaml and UUIDs). Avoid copying the handout; state what you changed and why.
      </p>

      <pre><code># connections.yaml (redacted if needed)
artemis_address: '[fill]'
ble_service: '[fill]'
characteristics:
  TX_CMD_STRING: '[fill]'
  RX_FLOAT: '[fill]'
  RX_STRING: '[fill]'</code></pre>

      <div class="task">
        <h3>Task 1: ECHO command</h3>
        <p class="small">State what you sent, what you received, and where it appeared (Jupyter output). Include one screenshot.</p>
        <div class="figure">
          <img src="[put-image-path-here]" alt="ECHO output in Jupyter" />
          <div class="caption">Figure 2. ECHO round-trip: laptop → Artemis → laptop.</div>
        </div>
        <pre><code>// Snippet: handler case or Python call (keep it short)
// [fill]</code></pre>
      </div>

      <div class="task">
        <h3>Task 2: SEND_THREE_FLOATS</h3>
        <p class="small">Show the command call and the Artemis-side extraction/printing evidence.</p>
        <div class="figure">
          <img src="[put-image-path-here]" alt="Three floats received on Artemis" />
          <div class="caption">Figure 3. Artemis receives three floats and prints them to Serial Monitor.</div>
        </div>
      </div>

      <div class="task">
        <h3>Task 3: GET_TIME_MILLIS command</h3>
        <p class="small">Show that the Artemis responds with a time string (e.g., T:123456) over the string notify channel.</p>
        <div class="figure">
          <img src="[put-image-path-here]" alt="GET_TIME_MILLIS output" />
          <div class="caption">Figure 4. GET_TIME_MILLIS response received over BLE string notifications.</div>
        </div>
      </div>

      <div class="task">
        <h3>Task 4: Notification handler parses time</h3>
        <p class="small">Include the minimal Python handler and evidence that it extracts the integer time values correctly.</p>
        <pre><code># Python (minimal)
# [fill: handler and start_notify call]</code></pre>
      </div>

      <div class="task">
        <h3>Task 5: Live streaming throughput measurement</h3>
        <p class="small">
          Describe the measurement method: a fixed-duration window, count messages, compute messages per second. Report your measured rate.
        </p>

        <div class="grid">
          <div class="kv">
            <b>Window length</b>
            <div class="small">[fill: e.g., 10 s]</div>
          </div>
          <div class="kv">
            <b>Measured throughput</b>
            <div class="small">[fill: e.g., XX messages per second]</div>
          </div>
        </div>

        <div class="figure">
          <img src="[put-image-path-here]" alt="Task 5 result" />
          <div class="caption">Figure 5. Task 5: throughput result (Serial Monitor or Jupyter output).</div>
        </div>

        <pre><code>// Arduino (short snippet)
// [fill: MESSAGE_SPEED core logic only]</code></pre>
      </div>

      <div class="task">
        <h3>Task 6: Buffered timestamps and SEND_TIME_DATA</h3>
        <p class="small">
          Explain: timestamps are recorded locally into a fixed-size global array, then transmitted after recording completes. Include: buffer length, sample count, and confirmation that Python received all points.
        </p>

        <div class="grid">
          <div class="kv">
            <b>Buffer length</b>
            <div class="small">TIME_BUF_LEN = [fill]</div>
          </div>
          <div class="kv">
            <b>Samples recorded and received</b>
            <div class="small">Recorded: [fill] · Received: [fill]</div>
          </div>
        </div>

        <div class="figure">
          <img src="[put-image-path-here]" alt="Task 6 results" />
          <div class="caption">Figure 6. Task 6: buffered timestamps transmitted and verified in Python.</div>
        </div>

        <pre><code>// Arduino (short snippet)
// [fill: RECORD_TIME_DATA write to array + SEND_TIME_DATA loop + DONE marker]</code></pre>

        <pre><code># Python (short snippet)
# [fill: parse "T:" into time_list and confirm count]</code></pre>
      </div>

      <div class="task">
        <h3>Task 7: Buffered time + temperature and GET_TEMP_READINGS</h3>
        <p class="small">
          Explain: a second array stores temperature aligned by index with the timestamp array; GET_TEMP_READINGS streams paired values as one record per notification. Include evidence that list lengths match and show a plot.
        </p>

        <div class="grid">
          <div class="kv">
            <b>Data format</b>
            <div class="small"><code>T:&lt;ms&gt;|C:&lt;degC&gt;</code></div>
          </div>
          <div class="kv">
            <b>Samples received</b>
            <div class="small">time_list: [fill] · temp_list: [fill]</div>
          </div>
        </div>

        <div class="figure">
          <img src="[put-image-path-here]" alt="Task 7 paired data in Jupyter" />
          <div class="caption">Figure 7. Task 7: paired timestamp and temperature readings received over BLE.</div>
        </div>

        <div class="figure">
          <img src="[put-image-path-here]" alt="Temperature vs time plot" />
          <div class="caption">Figure 8. Temperature vs time from buffered acquisition.</div>
        </div>

        <pre><code>// Arduino (short snippet)
// [fill: recording both arrays + GET_TEMP_READINGS transmit loop + DONE]</code></pre>

        <pre><code># Python (short snippet)
# [fill: parse into time_list/temp_list + plot]</code></pre>
      </div>
    </section>

    <section>
      <h2>Discussion</h2>

      <h3>Live streaming vs buffered acquisition</h3>
      <p class="small">
        Replace this with a tight comparison. Include: overhead, reliability, achievable sample rate, and when each method is preferable.
      </p>

      <div class="callout">
        <b>Memory estimate (RAM constraint)</b>
        <p class="small tight">
          Use this space to compute storage limits. Example structure:
          <br/>
          Timestamp array: TIME_BUF_LEN × 4 bytes (if using 32-bit) or × 8 bytes (if using unsigned long on your platform).
          <br/>
          Temperature array: TIME_BUF_LEN × 4 bytes.
          <br/>
          Total ≈ [fill] kB. Compare to 384 kB RAM and note overhead.
        </p>
      </div>

      <h3>Challenges and fixes</h3>
      <ul class="small">
        <li>[fill: e.g., UUID mismatch and resolution]</li>
        <li>[fill: e.g., start_notify run twice in Jupyter and resolution]</li>
        <li>[fill: e.g., dropped packets mitigated by delay(2)]</li>
      </ul>
    </section>

    <hr />

    <section>
      <h2>Selected code snippets</h2>
      <p class="small">
        Use GitHub Gists for larger snippets and embed links here. Include only the functions relevant to each task.
      </p>
      <ul class="small">
        <li>EString transmit helper gist: <a href="[gist-link]">[fill]</a></li>
        <li>Python notification handler gist: <a href="[gist-link]">[fill]</a></li>
        <li>Task 6/7 buffering gist: <a href="[gist-link]">[fill]</a></li>
      </ul>
    </section>

  </div>
</body>
</html>
